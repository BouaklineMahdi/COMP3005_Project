HOW TO SET UP AND RUN THE FITNESS CLUB APP (LOCAL, WITH PGADMIN4)

Assumptions:

PostgreSQL, pgAdmin4, and Python are already installed.

The project is already on your machine.

The app uses this database configuration (from app/config.py):

DB_HOST = localhost

DB_PORT = 5432

DB_NAME = fitness_club

DB_USER = postgres

DB_PASSWORD = postgres

CREATE THE DATABASE IN PGADMIN4

Open pgAdmin4.

In the left tree, expand: Servers → your server (e.g. “PostgreSQL 16” or similar).

Right-click on “Databases”.

Click “Create” → “Database…”.

In the dialog:

Database: fitness_club

Owner: postgres (this should match DB_USER in app/config.py)

Click “Save”.

You now have an empty database called “fitness_club”.

MAKE SURE THE POSTGRES USER AND PASSWORD MATCH

The app expects (by default, from config.py):

DB_USER = postgres

DB_PASSWORD = postgres

If your Postgres “postgres” user already has password “postgres”, you can skip this step.

If you’re not sure, you can force-set the password:

In pgAdmin4, expand your server.

Right-click the “postgres” database (or any database).

Click “Query Tool”.

In the query editor, type:

ALTER USER postgres WITH PASSWORD 'postgres';

Click the Execute/Play button (▶).

Now:

Username: postgres

Password: postgres

which matches what the app expects.

(If later you change these, you must update either environment variables or app/config.py so DB_USER and DB_PASSWORD match your actual Postgres user and password.)

CREATE A VIRTUAL ENVIRONMENT AND INSTALL DEPENDENCIES (FIRST TIME ONLY)

Open a terminal / PowerShell window in the project’s root folder (where app/ and requirements.txt are).

On WINDOWS:

Create the venv:
python -m venv venv

Activate it:
venv\Scripts\activate

Upgrade pip (optional but recommended):
pip install --upgrade pip

Install required packages:
pip install -r requirements.txt

On MACOS:

Create the venv:
python3 -m venv venv

Activate it:
source venv/bin/activate

Upgrade pip:
pip install --upgrade pip

Install required packages:
pip install -r requirements.txt

You only need to do this once (or when requirements.txt changes).
In future, just activate the venv and skip straight to database init / running.

To deactivate later:

deactivate

INITIALIZE THE DATABASE (TABLES + SAMPLE DATA)

This uses app/init_db.py to:

Drop any existing tables in fitness_club

Create all tables from the ORM models

Create the required VIEW, TRIGGER, and INDEX

Seed test admins, trainers, members, rooms, classes, etc.

Make sure:

PostgreSQL service is running

Database “fitness_club” exists (from step 1)

postgres / postgres is valid (from step 2)

The virtual environment is ACTIVE

Then, from the project root:

On both Windows and macOS (with venv active):

python -m app.init_db

What you should see (roughly):

“Dropping existing tables…”

“Creating tables from ORM models…”

“Creating VIEW: member_dashboard_view…”

“Creating TRIGGER FUNCTION: check_class_capacity()…”

“Creating INDEX: …”

“Populating sample data…”

And at the end: a summary of how many admins/trainers/members/etc were created, plus a list of test credentials (usually all using password: password123).

If this finishes with no errors, your DB is ready.

RUN THE APPLICATION

With the virtual environment still active, from the project root:

uvicorn app.main:app --reload

Expected output includes:

Uvicorn running on http://127.0.0.1:8000
 (Press CTRL+C to quit)
Application startup complete.

Leave this terminal window open; it is your running backend server.

OPEN THE UI AND TEST

Open a web browser.

Go to:
http://127.0.0.1:8000/ui/

You should see the main UI page with role options (Admin, Trainer, Member).

Login pages:

Admin login: http://127.0.0.1:8000/ui/login/admin

Trainer login: http://127.0.0.1:8000/ui/login/trainer

Member login: http://127.0.0.1:8000/ui/login/member

Use one of the seeded accounts printed at the end of the init_db script, for example (depending on what we seeded):

Admin:

Email: admin@gym.com

Password: password123

Example trainer:

Email: sarah@gym.com

Password: password123

Example member:

Email: alice@email.com

Password: password123

After logging in:

Admin should see the admin dashboard (create rooms, create classes, view classes).

Trainer should see the trainer dashboard (schedule, set availability).

Member should see the member dashboard (summary, classes, upcoming PT sessions, registration).

If you can:

Run init_db successfully,

Run uvicorn successfully,

Log in as at least one seeded user and see the correct dashboard,

then the app and database are fully connected and working.

SUPER SHORT VERSION (FOR QUICK REFERENCE)

In pgAdmin4:

Create DB: fitness_club, owner: postgres

Ensure user postgres has password postgres (ALTER USER if needed)

In project root (first time):

Create venv

Activate venv

pip install -r requirements.txt

Initialize DB:

python -m app.init_db

Run app:

uvicorn app.main:app --reload

Open UI:

http://127.0.0.1:8000/ui/

Log in with seeded credentials (e.g. admin@gym.com
 / password123)

You can now copy all of this as one block and drop it into a doc / email / Notion page, etc.

PREP (ONCE BEFORE RECORDING)

Ensure Postgres is running and fitness_club DB exists.

In project root, with venv active:

python -m app.init_db

uvicorn app.main:app --reload

App base URL: http://127.0.0.1:8000

UI base: http://127.0.0.1:8000/ui/

Swagger docs: http://127.0.0.1:8000/docs

Seeded credentials (all passwords: password123):

Admins:

admin@gym.com

sarah.manager@gym.com

Trainers:

sarah@gym.com

mike@gym.com

emma@gym.com

chris@gym.com

Members:

alice@email.com

bob@email.com

carol@email.com

david@email.com

emily@email.com

ADMIN TESTS (ROOM + CLASS MANAGEMENT)

A. Admin login (success)

Go to /ui/login/admin

Login: admin@gym.com / password123

Confirm redirect to admin dashboard and presence of admin-only controls.

B. Create room (success)

On admin dashboard, create room:

Name: Video Room A

Capacity: 20

Confirm:

Room appears in list on UI.

(Optional) In pgAdmin: SELECT * FROM room ORDER BY room_id DESC; shows Video Room A.

C. Create class (success)

Using admin UI, create class:

Name: Video Test Class

Start time: future datetime

Capacity: 3

Trainer: Sarah Fit (sarah@gym.com)

Room: Video Room A

Confirm class appears in list and exists in DB (SELECT * FROM class ORDER BY class_id DESC;).

D. Create invalid class (failure)

Try to create a class with:

Capacity: 0 (or negative)

Expect: validation/constraint error (no class created).

TRAINER TESTS (SCHEDULE + AVAILABILITY)

A. Trainer login (success)

Go to /ui/login/trainer

Login: sarah@gym.com / password123

Confirm trainer dashboard loads (shows Sarah’s schedule / availability).

B. View schedule (success)

Show list of Sarah’s upcoming classes/PT sessions (includes seeded plus Video Test Class if assigned).

C. Add availability (success)

On trainer dashboard, add availability:

Start: tomorrow 09:00

End: tomorrow 12:00

Confirm new slot appears in list and in DB:
SELECT * FROM trainer_availability WHERE trainer_id = <Sarah’s ID>;

D. Invalid availability (failure)

Try: start time > end time (e.g., start 13:00, end 12:00).

Expect: error (validation or DB CHECK).

MEMBER TESTS (DASHBOARD + REGISTRATION + METRICS)

Use member Alice Johnson (alice@email.com).

A. Member login (success)

Go to /ui/login/member

Login: alice@email.com / password123

Confirm member dashboard loads:

Summary info: latest metric, total classes registered, upcoming PT sessions.

B. Register for a real class (success)

Identify a valid class_id (e.g. Video Test Class created earlier).

In member dashboard, use “Register for Class” with that class_id.

Confirm:

Success message.

Total classes registered increases (after refresh).

DB: SELECT * FROM class_registration WHERE member_id = <Alice’s ID>; shows new row.

C. Register for non-existent class (failure)

Use “Register for Class” with class_id = 99999.

Expect: 400/404 error (no registration added).

D. Capacity trigger (failure)

As admin:

Create a class:

Name: Tiny Class

Capacity: 1

Trainer: Sarah

Room: any existing room.

As member Alice:

Register for Tiny Class → success.

As member Bob (bob@email.com / password123):

Login as member.

Attempt to register for the same Tiny Class.

Expect: error “Class X is full (capacity Y)” from trigger trg_class_capacity.

E. Log health metric (success via API)

Go to /docs.

Use POST /members/{member_id}/metrics with:

member_id: Alice’s ID

Body: {"metric_type": "weight", "metric_value": 145.0}

Expect: 200 response; metric returned.

Member dashboard should eventually show new latest metric (depending on refresh).

F. Invalid metric (failure)

Same endpoint, but:

Missing metric_type OR metric_value negative.

Expect: 400 validation error.

AUTH / ROLE SEPARATION CHECKS

A. Wrong password (failure)

Try logging into any role with correct email + wrong password.

Expect: login rejected (error message / 401).

B. Role separation (conceptual)

Show that:

Member UI has no admin/trainer controls.

Trainer UI has no admin-only controls.

Admin sees all management tools.

(If you have protected endpoints, you can mention 403/unauthorized responses, but UI separation is usually enough for the video.)

OPTIONAL DB / VIEW DEMO (SHORT)

A. In pgAdmin, run:

SELECT * FROM member;

SELECT * FROM class;

SELECT * FROM class_registration;

SELECT * FROM ptsession;

SELECT * FROM member_dashboard_view;

B. Point out:

Rows matching the actions you just did (registrations, new class, new metric).

member_dashboard_view columns:

latest_metric_value / latest_metric_type

total_classes_registered

upcoming_pt_sessions

This shows that the view, trigger, index, roles, and operations are all working with the seeded data.